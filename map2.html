<!doctype html>
<html>
<head>
    <title>Twitter Use in Kenya</title>
	<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<!--<link rel="stylesheet" href='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.css' />-->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	<link rel="stylesheet" href='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' />
    <link rel="stylesheet" href='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' />
<!--    <script src="jquery-1.11.0.js"></script>-->
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	<script src='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
	<script src='https://api.mapbox.com/mapbox.js/v2.2.3/mapbox.js'></script>
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v1.0.0/leaflet-omnivore.min.js'></script>
	<script type="text/javascript">window.googleDocCallback = function () { return true; };</script>
		<style>
		body { margin:0; padding:0; }
		html,body { height: 100%; }
		#map { height: 100%}
		.leaflet-overlay-pane path, .leaflet-marker-icon { cursor: pointer; }
		#pop { font-family: 'Helvetica Neue', Verdana, Tahoma, 'sans-serif'; color: black !important; }
		.ui-content { position: absolute; top: 45px; right: 0; bottom: 0px; left: 0; padding: 0 !important; }
		</style>
</head>
<body>	
		<h1>Tweet Map</h1>		
		
		
				<div id='map'></div>
				<script type="text/javascript">
				var map = L.map('map').setView([0.494, 37.661], 6);
            L.tileLayer('https://{s}.tiles.mapbox.com/v3/geyerbri-msu.hn5m20b4/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    minZoom: 5
}).addTo(map);
            //enter path for .csv here
            omnivore.csv('https://docs.google.com/spreadsheets/d/1LLEVmnvrgK0aVWSgJv6o2c4ALfsXbrGpSSpAj07RfIk/pub?gid=82&single=true&output=csv&callback=googleDocCallback')
             .on('ready', function(layer) {
       
        this.eachLayer(function(marker) {
          
            // Bind a popup to each icon based on the same properties
            // Adds coloumns of extra info to marker popup
            marker.bindPopup("<div style='clear: both'></div><div style='float: left; padding: 5px; margin-right: 10px'><img style='width: 100px;' src=" + feature.properties.profile_image_url + " /></div><div float: right><span id='pop'><strong>"+'@'+feature.properties.from_user+"</strong><br>"+feature.properties.text+"</p></span></div><div style='clear: both'></div>", {closeButton: true, autoPanPadding: [5,55]});
        });
    })
            .addTo(map);
				</script>
				
				
				
<!--				<script type="text/javascript">
					var southWest = L.latLng(-11.236632, 28.567951),
						northEast = L.latLng(18.984171, 50.682093),
						bounds = L.latLngBounds(southWest, northEast);
					L.mapbox.accessToken = 'pk.eyJ1IjoiZ2V5ZXJicmktbXN1IiwiYSI6IkxTRGhIQnMifQ.HbqL3TWxcEQLB61NEzCNYA';
				var map = L.mapbox.map('map', 'geyerbri-msu.hn5m20b4', {maxBounds: bounds});
				//	var map = L.map('map', {maxBounds: bounds}).setView([0.494, 37.661], 6);
				//this.mapAttribution = L.control.attribution({prefix: true}).addTo(this.map);
				//	var layer = L.mapbox.tileLayer('geyerbri-msu.hn5m20b4', {
				//		format: 'jpg80',
					//	attribution: '<a href="http://mapbox.com" target="_blank">MapBox</a> | <a href="https://jquerymobile.com/" target="_blank">jQuery Mobile</a> | <a href="https://tags.hawksey.info" target="_blank">TAGS</a>',
						//minZoom: 5,
				//	});
			//		map.addLayer(layer);
				//this.mapAttribution.addAttribution('<a href="http://mapbox.com">MapBox</a> | <a href="https://jquerymobile.com/">jQuery Mobile</a> | <a href="https://tags.hawksey.info">TAGS</a>');
				//L.mapbox.tileLayer('https://{s}.tiles.mapbox.com/v4/geyerbri-msu.hn5m20b4/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZ2V5ZXJicmktbXN1IiwiYSI6IkxTRGhIQnMifQ.HbqL3TWxcEQLB61NEzCNYA').addTo(map);
//					window.googleDocCallback = function () { return true; };
					var points = omnivore.csv(
					'http://remnantsofslavery.matrix.msu.edu/archive.csv').on('ready', function() {
						this.eachLayer(function(marker) {
							if (marker.toGeoJSON().properties.lang !== 'null') {
								marker.setIcon(L.mapbox.marker.icon({
									'marker-color': '#D00000',
							}))};
						});
						points.eachLayer(eachLayer);
						
					}).addTo(map);
				
					function eachLayer(layer) {
						var feature = layer.toGeoJSON();
						if (feature.properties) {
							if (feature.properties.from_user) {
								layer.bindPopup("<div style='clear: both'></div><div style='float: left; padding: 5px; margin-right: 10px'><img style='width: 100px;' src=" + feature.properties.profile_image_url + " /></div><div float: right><span id='pop'><strong>"+'@'+feature.properties.from_user+"</strong><br>"+feature.properties.text+"</p></span></div><div style='clear: both'></div>", {closeButton: true, autoPanPadding: [5,55]});
						}}
					};
				</script>
-->
	
</body>
</html>